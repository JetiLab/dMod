% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/classes.R
\name{prdfn}
\alias{prdfn}
\title{Prediction function}
\usage{
prdfn(P2X, parameters = NULL, condition = NULL)
}
\arguments{
\item{P2X}{Transformation function as produced by \code{\link[=Xs]{Xs()}}, \code{\link[=Xf]{Xf()}} or \code{\link[=Xd]{Xd()}}.}

\item{parameters}{Character vector with parameter names.}

\item{condition}{Character, the condition name.}
}
\value{
Object of class \code{"prdfn"}, i.e. a function
\code{x(..., fixed, deriv, deriv2, conditions, env)} returning a \link{prdlist}.
The arguments \code{times} and \code{pars} should be passed via \code{...}, in this order.
}
\description{
A prediction function is a function
\code{x(..., fixed, deriv, deriv2, conditions, env)}.
Prediction functions are generated by \code{\link[=Xs]{Xs()}}, \code{\link[=Xf]{Xf()}} or \code{\link[=Xd]{Xd()}}.
}
\details{
Prediction functions can be "added" by the "+" operator, see \code{\link[=sumfn]{sumfn()}}.
Thereby, predictions for different conditions are merged or overwritten.
Prediction functions can also be composed with other functions,
e.g. observation functions (\code{\link[=obsfn]{obsfn()}}) or parameter transformation
functions (\code{\link[=parfn]{parfn()}}) by the "*" operator, see \code{\link[=prodfn]{prodfn()}}.
}
\examples{
\dontrun{
  # Define a time grid on which to make a prediction by peace-wise linear function.
  # Then define a (generic) prediction function based on thid grid.
  times <- 0:5
  grid <- data.frame(name = "A", time = times, row.names = paste0("p", times))
  x <- Xd(grid)
  
  # Define an observable and an observation function
  observables <- eqnvec(Aobs = "s*A")
  g <- Y(g = observables, f = NULL, states = "A", parameters = "s")
  
  # Collect parameters and define an overarching parameter transformation
  # for two "experimental condtions".
  dynpars <- attr(x, "parameters")
  obspars <- attr(g, "parameters")
  innerpars <- c(dynpars, obspars)
  
  trafo <- structure(innerpars, names = innerpars)
  trafo_C1 <- replaceSymbols(innerpars, paste(innerpars, "C1", sep = "_"), trafo)
  trafo_C2 <- replaceSymbols(innerpars, paste(innerpars, "C2", sep = "_"), trafo)
  
  p <- NULL
  p <- p + P(trafo = trafo_C1, condition = "C1")
  p <- p + P(trafo = trafo_C2, condition = "C2")
  
  # Collect outer (overarching) parameters and 
  # initialize with random values
  outerpars <- attr(p, "parameters")
  pars <- structure(runif(length(outerpars), 0, 1), names = outerpars)
  
  # Predict internal/unobserved states
  out1 <- (x*p)(times, pars)
  plot(out1)
  
  # Predict observed states in addition to unobserved
  out2 <- (g*x*p)(times, pars)
  plot(out2)
}
}
